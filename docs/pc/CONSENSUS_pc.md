# CONSENSUS_pc

## 需求与验收标准
- 登录与会话
  - 支持短信验证码登录（`/auth/user/login`）；成功后持久化 Token 与用户信息
  - 验收：刷新后自动恢复会话；`401` 时清理并跳转登录
- 路由与守卫
  - `requiresAuth` 页面需登录才可访问；未登录统一重定向并带回跳路径
  - 验收：受限页面均被拦截；登录后正确返回目标页
- 车源
  - 列表分页、详情展示、创建/更新/删除、上下架、续期、VIN 校验
  - 验收：接口返回符合 `types/` 定义；状态与数据同步正确
- 订单
  - 我的购买/出售订单列表、详情、创建（预约）、支付、取消、完成
  - 验收：状态变更即时反映到列表与详情；支付生成有效跳转链接
- 上传
  - 图片/文件上传，支持进度回调；批量上传正确聚合结果
  - 验收：失败有明确提示与恢复策略；资源释放（blob URL）安全
- 国际化与样式
  - 语言切换稳定；货币/日期格式正确；样式变量统一注入
  - 验收：多语言页面可无刷新切换；格式化一致

## 技术实现方案
- 前端框架：Vue 3 + TS；状态：Pinia；路由：Vue Router；UI：Element Plus
- 网络层：统一 Axios 拦截器附带 Token；错误提示标准化；`401` 统一退出与重定向
- 代理与环境：Vite 开发代理 `/api`、`/uploads` 至后端；端口动态分配
- 国际化：`vue-i18n` 以 localStorage 与浏览器语言选择初始语言，配置货币/日期格式
- 样式：Sass + 全局变量注入；组件按需自动导入

## 集成方案与约束
- 依赖后端 `http://localhost:8000` 按路径与响应模型提供服务
- Token 存储于 `localStorage`，前端不记录明文敏感信息
- 统一错误提示，避免泄露后端内部信息；不在控制台打印机密

## 边界限制
- 不负责后端业务逻辑与数据一致性；仅前端交互与展示
- 上传策略以单点接口为准；大文件断点续传与并发限流为后续优化项

## 不确定性处理（已对齐）
- 422 提示结构：若后端返回 `details` 字段，按数组/字典逐项提示；否则回退到 `message`
- 登录跳转：拦截后带 `redirect` 参数回原目标；`401` 响应强制回登录页

